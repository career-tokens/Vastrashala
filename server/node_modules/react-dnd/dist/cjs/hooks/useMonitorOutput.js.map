{"version":3,"sources":["../../../src/hooks/useMonitorOutput.ts"],"sourcesContent":["import type { HandlerManager, MonitorEventEmitter } from '../types/index.js'\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect.js'\nimport { useCollector } from './useCollector.js'\n\nexport function useMonitorOutput<Monitor extends HandlerManager, Collected>(\n\tmonitor: Monitor & MonitorEventEmitter,\n\tcollect: (monitor: Monitor) => Collected,\n\tonCollect?: () => void,\n): Collected {\n\tconst [collected, updateCollected] = useCollector(monitor, collect, onCollect)\n\n\tuseIsomorphicLayoutEffect(\n\t\tfunction subscribeToMonitorStateChange() {\n\t\t\tconst handlerId = monitor.getHandlerId()\n\t\t\tif (handlerId == null) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn monitor.subscribeToStateChange(updateCollected, {\n\t\t\t\thandlerIds: [handlerId],\n\t\t\t})\n\t\t},\n\t\t[monitor, updateCollected],\n\t)\n\n\treturn collected\n}\n"],"names":["useMonitorOutput","monitor","collect","onCollect","collected","updateCollected","useCollector","useIsomorphicLayoutEffect","subscribeToMonitorStateChange","handlerId","getHandlerId","subscribeToStateChange","handlerIds"],"mappings":"AAAA;;;;QAIgBA,gBAAgB,GAAhBA,gBAAgB;AAHU,IAAA,4BAAgC,WAAhC,gCAAgC,CAAA;AAC7C,IAAA,eAAmB,WAAnB,mBAAmB,CAAA;AAEzC,SAASA,gBAAgB,CAC/BC,OAAsC,EACtCC,OAAwC,EACxCC,SAAsB,EACV;IACZ,MAAM,CAACC,SAAS,EAAEC,eAAe,CAAC,GAAGC,CAAAA,GAAAA,eAAY,AAA6B,CAAA,aAA7B,CAACL,OAAO,EAAEC,OAAO,EAAEC,SAAS,CAAC;IAE9EI,CAAAA,GAAAA,4BAAyB,AAWxB,CAAA,0BAXwB,CACxB,SAASC,6BAA6B,GAAG;QACxC,MAAMC,SAAS,GAAGR,OAAO,CAACS,YAAY,EAAE;QACxC,IAAID,SAAS,IAAI,IAAI,EAAE;YACtB,OAAM;SACN;QACD,OAAOR,OAAO,CAACU,sBAAsB,CAACN,eAAe,EAAE;YACtDO,UAAU,EAAE;gBAACH,SAAS;aAAC;SACvB,CAAC,CAAA;KACF,EACD;QAACR,OAAO;QAAEI,eAAe;KAAC,CAC1B;IAED,OAAOD,SAAS,CAAA;CAChB"}