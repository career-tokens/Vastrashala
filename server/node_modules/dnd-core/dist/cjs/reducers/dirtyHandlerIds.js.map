{"version":3,"sources":["../../../src/reducers/dirtyHandlerIds.ts"],"sourcesContent":["import {\n\tBEGIN_DRAG,\n\tPUBLISH_DRAG_SOURCE,\n\tHOVER,\n\tEND_DRAG,\n\tDROP,\n} from '../actions/dragDrop/index.js'\nimport {\n\tADD_SOURCE,\n\tADD_TARGET,\n\tREMOVE_SOURCE,\n\tREMOVE_TARGET,\n} from '../actions/registry.js'\nimport type { Action } from '../interfaces.js'\nimport { areArraysEqual } from '../utils/equality.js'\nimport { NONE, ALL } from '../utils/dirtiness.js'\nimport { xor } from '../utils/js_utils.js'\n\nexport type State = string[]\n\nexport interface DirtyHandlerIdPayload {\n\ttargetIds: string[]\n\tprevTargetIds: string[]\n}\n\nexport function reduce(\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\t_state: State = NONE,\n\taction: Action<DirtyHandlerIdPayload>,\n): State {\n\tswitch (action.type) {\n\t\tcase HOVER:\n\t\t\tbreak\n\t\tcase ADD_SOURCE:\n\t\tcase ADD_TARGET:\n\t\tcase REMOVE_TARGET:\n\t\tcase REMOVE_SOURCE:\n\t\t\treturn NONE\n\t\tcase BEGIN_DRAG:\n\t\tcase PUBLISH_DRAG_SOURCE:\n\t\tcase END_DRAG:\n\t\tcase DROP:\n\t\tdefault:\n\t\t\treturn ALL\n\t}\n\n\tconst { targetIds = [], prevTargetIds = [] } = action.payload\n\tconst result = xor(targetIds, prevTargetIds)\n\tconst didChange =\n\t\tresult.length > 0 || !areArraysEqual(targetIds, prevTargetIds)\n\n\tif (!didChange) {\n\t\treturn NONE\n\t}\n\n\t// Check the target ids at the innermost position. If they are valid, add them\n\t// to the result\n\tconst prevInnermostTargetId = prevTargetIds[prevTargetIds.length - 1]\n\tconst innermostTargetId = targetIds[targetIds.length - 1]\n\tif (prevInnermostTargetId !== innermostTargetId) {\n\t\tif (prevInnermostTargetId) {\n\t\t\tresult.push(prevInnermostTargetId)\n\t\t}\n\t\tif (innermostTargetId) {\n\t\t\tresult.push(innermostTargetId)\n\t\t}\n\t}\n\n\treturn result\n}\n"],"names":["reduce","_state","NONE","action","type","HOVER","ADD_SOURCE","ADD_TARGET","REMOVE_TARGET","REMOVE_SOURCE","BEGIN_DRAG","PUBLISH_DRAG_SOURCE","END_DRAG","DROP","ALL","targetIds","prevTargetIds","payload","result","xor","didChange","length","areArraysEqual","prevInnermostTargetId","innermostTargetId","push"],"mappings":"AAAA;;;;QAyBgBA,MAAM,GAANA,MAAM;AAnBf,IAAA,QAA8B,WAA9B,8BAA8B,CAAA;AAM9B,IAAA,WAAwB,WAAxB,wBAAwB,CAAA;AAEA,IAAA,WAAsB,WAAtB,sBAAsB,CAAA;AAC3B,IAAA,YAAuB,WAAvB,uBAAuB,CAAA;AAC7B,IAAA,UAAsB,WAAtB,sBAAsB,CAAA;AASnC,SAASA,MAAM,CACrB,6DAA6D;AAC7DC,MAAa,GAAGC,YAAI,KAAA,EACpBC,MAAqC,EAC7B;IACR,OAAQA,MAAM,CAACC,IAAI;QAClB,KAAKC,QAAK,MAAA;YACT,MAAK;QACN,KAAKC,WAAU,WAAA,CAAC;QAChB,KAAKC,WAAU,WAAA,CAAC;QAChB,KAAKC,WAAa,cAAA,CAAC;QACnB,KAAKC,WAAa,cAAA;YACjB,OAAOP,YAAI,KAAA,CAAA;QACZ,KAAKQ,QAAU,WAAA,CAAC;QAChB,KAAKC,QAAmB,oBAAA,CAAC;QACzB,KAAKC,QAAQ,SAAA,CAAC;QACd,KAAKC,QAAI,KAAA,CAAC;QACV;YACC,OAAOC,YAAG,IAAA,CAAA;KACX;IAED,MAAM,EAAEC,SAAS,EAAG,EAAE,CAAA,EAAEC,aAAa,EAAG,EAAE,CAAA,EAAE,GAAGb,MAAM,CAACc,OAAO;IAC7D,MAAMC,MAAM,GAAGC,CAAAA,GAAAA,UAAG,AAA0B,CAAA,IAA1B,CAACJ,SAAS,EAAEC,aAAa,CAAC;IAC5C,MAAMI,SAAS,GACdF,MAAM,CAACG,MAAM,GAAG,CAAC,IAAI,CAACC,CAAAA,GAAAA,WAAc,AAA0B,CAAA,eAA1B,CAACP,SAAS,EAAEC,aAAa,CAAC;IAE/D,IAAI,CAACI,SAAS,EAAE;QACf,OAAOlB,YAAI,KAAA,CAAA;KACX;IAED,8EAA8E;IAC9E,gBAAgB;IAChB,MAAMqB,qBAAqB,GAAGP,aAAa,CAACA,aAAa,CAACK,MAAM,GAAG,CAAC,CAAC;IACrE,MAAMG,iBAAiB,GAAGT,SAAS,CAACA,SAAS,CAACM,MAAM,GAAG,CAAC,CAAC;IACzD,IAAIE,qBAAqB,KAAKC,iBAAiB,EAAE;QAChD,IAAID,qBAAqB,EAAE;YAC1BL,MAAM,CAACO,IAAI,CAACF,qBAAqB,CAAC;SAClC;QACD,IAAIC,iBAAiB,EAAE;YACtBN,MAAM,CAACO,IAAI,CAACD,iBAAiB,CAAC;SAC9B;KACD;IAED,OAAON,MAAM,CAAA;CACb"}