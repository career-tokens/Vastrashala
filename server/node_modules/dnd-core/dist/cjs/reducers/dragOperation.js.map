{"version":3,"sources":["../../../src/reducers/dragOperation.ts"],"sourcesContent":["import {\n\tBEGIN_DRAG,\n\tPUBLISH_DRAG_SOURCE,\n\tHOVER,\n\tEND_DRAG,\n\tDROP,\n} from '../actions/dragDrop/index.js'\nimport { REMOVE_TARGET } from '../actions/registry.js'\nimport type { Identifier, Action } from '../interfaces.js'\nimport { without } from '../utils/js_utils.js'\n\nexport interface State {\n\titemType: Identifier | Identifier[] | null\n\titem: any\n\tsourceId: string | null\n\ttargetIds: string[]\n\tdropResult: any\n\tdidDrop: boolean\n\tisSourcePublic: boolean | null\n}\n\nconst initialState: State = {\n\titemType: null,\n\titem: null,\n\tsourceId: null,\n\ttargetIds: [],\n\tdropResult: null,\n\tdidDrop: false,\n\tisSourcePublic: null,\n}\n\nexport function reduce(\n\tstate: State = initialState,\n\taction: Action<{\n\t\titemType: Identifier | Identifier[]\n\t\titem: any\n\t\tsourceId: string\n\t\ttargetId: string\n\t\ttargetIds: string[]\n\t\tisSourcePublic: boolean\n\t\tdropResult: any\n\t}>,\n): State {\n\tconst { payload } = action\n\tswitch (action.type) {\n\t\tcase BEGIN_DRAG:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\titemType: payload.itemType,\n\t\t\t\titem: payload.item,\n\t\t\t\tsourceId: payload.sourceId,\n\t\t\t\tisSourcePublic: payload.isSourcePublic,\n\t\t\t\tdropResult: null,\n\t\t\t\tdidDrop: false,\n\t\t\t}\n\t\tcase PUBLISH_DRAG_SOURCE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisSourcePublic: true,\n\t\t\t}\n\t\tcase HOVER:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttargetIds: payload.targetIds,\n\t\t\t}\n\t\tcase REMOVE_TARGET:\n\t\t\tif (state.targetIds.indexOf(payload.targetId) === -1) {\n\t\t\t\treturn state\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttargetIds: without(state.targetIds, payload.targetId),\n\t\t\t}\n\t\tcase DROP:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tdropResult: payload.dropResult,\n\t\t\t\tdidDrop: true,\n\t\t\t\ttargetIds: [],\n\t\t\t}\n\t\tcase END_DRAG:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\titemType: null,\n\t\t\t\titem: null,\n\t\t\t\tsourceId: null,\n\t\t\t\tdropResult: null,\n\t\t\t\tdidDrop: false,\n\t\t\t\tisSourcePublic: null,\n\t\t\t\ttargetIds: [],\n\t\t\t}\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n"],"names":["reduce","initialState","itemType","item","sourceId","targetIds","dropResult","didDrop","isSourcePublic","state","action","payload","type","BEGIN_DRAG","PUBLISH_DRAG_SOURCE","HOVER","REMOVE_TARGET","indexOf","targetId","without","DROP","END_DRAG"],"mappings":"AAAA;;;;QA+BgBA,MAAM,GAANA,MAAM;AAzBf,IAAA,QAA8B,WAA9B,8BAA8B,CAAA;AACP,IAAA,WAAwB,WAAxB,wBAAwB,CAAA;AAE9B,IAAA,UAAsB,WAAtB,sBAAsB,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAY9C,MAAMC,YAAY,GAAU;IAC3BC,QAAQ,EAAE,IAAI;IACdC,IAAI,EAAE,IAAI;IACVC,QAAQ,EAAE,IAAI;IACdC,SAAS,EAAE,EAAE;IACbC,UAAU,EAAE,IAAI;IAChBC,OAAO,EAAE,KAAK;IACdC,cAAc,EAAE,IAAI;CACpB;AAEM,SAASR,MAAM,CACrBS,KAAY,GAAGR,YAAY,EAC3BS,MAQE,EACM;IACR,MAAM,EAAEC,OAAO,CAAA,EAAE,GAAGD,MAAM;IAC1B,OAAQA,MAAM,CAACE,IAAI;QAClB,KAAKC,QAAU,WAAA;YACd,OAAO,kBACHJ,KAAK;gBACRP,QAAQ,EAAES,OAAO,CAACT,QAAQ;gBAC1BC,IAAI,EAAEQ,OAAO,CAACR,IAAI;gBAClBC,QAAQ,EAAEO,OAAO,CAACP,QAAQ;gBAC1BI,cAAc,EAAEG,OAAO,CAACH,cAAc;gBACtCF,UAAU,EAAE,IAAI;gBAChBC,OAAO,EAAE,KAAK;cACd,CAAA;QACF,KAAKO,QAAmB,oBAAA;YACvB,OAAO,kBACHL,KAAK;gBACRD,cAAc,EAAE,IAAI;cACpB,CAAA;QACF,KAAKO,QAAK,MAAA;YACT,OAAO,kBACHN,KAAK;gBACRJ,SAAS,EAAEM,OAAO,CAACN,SAAS;cAC5B,CAAA;QACF,KAAKW,WAAa,cAAA;YACjB,IAAIP,KAAK,CAACJ,SAAS,CAACY,OAAO,CAACN,OAAO,CAACO,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE;gBACrD,OAAOT,KAAK,CAAA;aACZ;YACD,OAAO,kBACHA,KAAK;gBACRJ,SAAS,EAAEc,CAAAA,GAAAA,UAAO,AAAmC,CAAA,QAAnC,CAACV,KAAK,CAACJ,SAAS,EAAEM,OAAO,CAACO,QAAQ,CAAC;cACrD,CAAA;QACF,KAAKE,QAAI,KAAA;YACR,OAAO,kBACHX,KAAK;gBACRH,UAAU,EAAEK,OAAO,CAACL,UAAU;gBAC9BC,OAAO,EAAE,IAAI;gBACbF,SAAS,EAAE,EAAE;cACb,CAAA;QACF,KAAKgB,QAAQ,SAAA;YACZ,OAAO,kBACHZ,KAAK;gBACRP,QAAQ,EAAE,IAAI;gBACdC,IAAI,EAAE,IAAI;gBACVC,QAAQ,EAAE,IAAI;gBACdE,UAAU,EAAE,IAAI;gBAChBC,OAAO,EAAE,KAAK;gBACdC,cAAc,EAAE,IAAI;gBACpBH,SAAS,EAAE,EAAE;cACb,CAAA;QACF;YACC,OAAOI,KAAK,CAAA;KACb;CACD"}