"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[349],{17379:function(R,f,e){e.d(f,{r:function(){return T}});var t=e(32735),n=e(72850),r=e(60216),m=e.n(r),v=e(74506);function c(g,i,o){if(!g||!i)return{display:"none"};const{x:s,y:a}=o;return{transform:`translate(${s}px, ${a}px)`}}function T({renderItem:g}){const{itemType:i,isDragging:o,item:s,initialOffset:a,currentOffset:h,mouseOffset:O}=(0,v.useDragLayer)(C=>({item:C.getItem(),itemType:C.getItemType(),initialOffset:C.getInitialSourceClientOffset(),currentOffset:C.getSourceClientOffset(),isDragging:C.isDragging(),mouseOffset:C.getClientOffset()}));return o?t.createElement(n.x,{height:"100%",left:0,position:"fixed",pointerEvents:"none",top:0,zIndex:100,width:"100%"},t.createElement(n.x,{style:c(a,h,O)},g({type:i,item:s}))):null}T.propTypes={renderItem:m().func.isRequired}},50337:function(R,f,e){e.d(f,{pl:function(){return g},aY:function(){return M},q5:function(){return h.q}});var t=e(32735),n=e(19565),r=e(97889);const m={data:[],isLoading:!0};var c=(p,A)=>(0,r.ZP)(p,y=>{switch(A.type){case"GET_DATA_SUCCEEDED":{y.data=A.data,y.isLoading=!1;break}case"GET_DATA_ERROR":{y.isLoading=!1;break}default:return y}}),g=({ssoEnabled:p})=>{const[A,y]=(0,t.useReducer)(c,m),S=(0,n.lm)(),{get:l}=(0,n.kY)();return(0,t.useEffect)(()=>{(async()=>{try{if(!p){y({type:"GET_DATA_SUCCEEDED",data:[]});return}const{data:w}=await l("/admin/providers");y({type:"GET_DATA_SUCCEEDED",data:w})}catch(w){console.error(w),y({type:"GET_DATA_ERROR"}),S({type:"warning",message:{id:"notification.error"}})}})()},[l,p,S]),A},i=e(36866),o=e.n(i),s=e(67879),a=e(53038),h=e(53104);const O="strapi-notification-seat-limit",C="https://cloud.strapi.io/profile/billing",I="https://strapi.io/billing/request-seats";var M=()=>{const{formatMessage:p}=(0,s.Z)();let{license:A,isError:y,isLoading:S}=(0,h.q)();const l=(0,n.lm)(),{pathname:u}=(0,a.TH)(),{enforcementUserCount:w,permittedSeats:D,licenseLimitStatus:L,isHostedOnStrapiCloud:x}=A;(0,t.useEffect)(()=>{if(y||S)return;const U=!o()(D)&&!window.sessionStorage.getItem(`${O}-${u}`)&&(L==="AT_LIMIT"||L==="OVER_LIMIT");let N;L==="OVER_LIMIT"?N="warning":L==="AT_LIMIT"&&(N="softWarning"),U&&l({type:N,message:p({id:"notification.ee.warning.over-.message",defaultMessage:"Add seats to {licenseLimitStatus, select, OVER_LIMIT {invite} other {re-enable}} Users. If you already did it but it's not reflected in Strapi yet, make sure to restart your app."},{licenseLimitStatus:L}),title:p({id:"notification.ee.warning.at-seat-limit.title",defaultMessage:"{licenseLimitStatus, select, OVER_LIMIT {Over} other {At}} seat limit ({enforcementUserCount}/{permittedSeats})"},{licenseLimitStatus:L,enforcementUserCount:w,permittedSeats:D}),link:{url:x?C:I,label:p({id:"notification.ee.warning.seat-limit.link",defaultMessage:"{isHostedOnStrapiCloud, select, true {ADD SEATS} other {CONTACT SALES}}"},{isHostedOnStrapiCloud:x})},blockTransition:!0,onClose(){window.sessionStorage.setItem(`${O}-${u}`,!0)}})},[l,A,u,p,S,D,L,w,x,y])}},53104:function(R,f,e){e.d(f,{q:function(){return m}});var t=e(32735),n=e(19565),r=e(20108);function m({enabled:v}={enabled:!0}){const{get:c}=(0,n.kY)(),{data:T,isError:g,isLoading:i}=(0,r.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:a}}=await c("/admin/license-limit-information");return a},{enabled:v}),o=T??{},s=t.useCallback(a=>(o?.features??[]).find(O=>O.name===a)?.options??{},[o?.features]);return{license:o,getFeature:s,isError:g,isLoading:i}}},27187:function(R,f,e){e.d(f,{eJ:function(){return S},lx:function(){return A},h4:function(){return l},fC:function(){return y}});var t=e(32735),n=e(96709),r=e(27649),m=e(17e3),v=e(82055),c=e(19565),T=e(29439),g=e(67879),i=e(17379),o=e(2121),s=e(87933),a=e(49372),h=e(16899),O=e(60216),C=e.n(O),I=e(8471);const P=(0,I.ZP)(s.k)`
  svg path {
    fill: ${({theme:u})=>u.colors.neutral600};
  }
`;function M({name:u}){return t.createElement(s.k,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",gap:3,hasRadius:!0,padding:3,shadow:"tableShadow",width:(0,c.Q1)(300)},t.createElement(P,{alignItems:"center",background:"neutral200",borderRadius:"50%",height:6,justifyContent:"center",width:6},t.createElement(h.Z,{width:`${8/16}rem`})),t.createElement(a.Z,{fontWeight:"bold"},u))}M.propTypes={name:C().string.isRequired};function p({type:u,item:w}){switch(u){case o.uL.STAGE:return t.createElement(M,{...w});default:return null}}function A(){return t.createElement(i.r,{renderItem:p})}function y({children:u}){return t.createElement(n.A,null,t.createElement(r.o,{tabIndex:-1},t.createElement(m.D,null,u)))}function S({href:u}){const{formatMessage:w}=(0,g.Z)();return t.createElement(c.rU,{startIcon:t.createElement(T.Z,null),to:u},w({id:"global.back",defaultMessage:"Back"}))}function l({title:u,subtitle:w,navigationAction:D,primaryAction:L}){return t.createElement(t.Fragment,null,t.createElement(c.SL,{name:u}),t.createElement(v.T,{navigationAction:D,primaryAction:L,title:u,subtitle:w}))}},90562:function(R,f,e){e.d(f,{uT:function(){return p},fC:function(){return S},Dx:function(){return M}});var t=e(32735),n=e(49372),r=e(87933),m=e(85025),v=e(31600),c=e(72850),T=e(50563),g=e(95489),i=e(35331),o=e(60216),s=e.n(o),a=e(67879),h=e(8471),O=e.p+"0cd5f8915b265d5b1856.png";const C="limits-title",I="https://strapi.io/pricing-cloud",P="https://strapi.io/contact-sales";function M({children:l}){return t.createElement(n.Z,{variant:"alpha",id:C},l)}M.propTypes={children:s().node.isRequired};function p({children:l}){return t.createElement(n.Z,{variant:"omega"},l)}p.propTypes={children:s().node.isRequired};function A(){const{formatMessage:l}=(0,a.Z)();return t.createElement(r.k,{gap:2,paddingTop:4},t.createElement(g.Q,{variant:"default",isExternal:!0,href:I},l({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),t.createElement(g.Q,{variant:"tertiary",isExternal:!0,href:P},l({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const y=h.ZP.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:l})=>`-${l.spaces[7]}`};
  margin-top: ${({theme:l})=>`-${l.spaces[7]}`};
  width: 360px;
`;function S({children:l,isOpen:u,onClose:w}){const{formatMessage:D}=(0,a.Z)();return u?t.createElement(m.P,{labelledBy:C},t.createElement(v.f,null,t.createElement(r.k,{gap:2,paddingLeft:7,position:"relative"},t.createElement(r.k,{alignItems:"start",direction:"column",gap:2,width:"60%"},l,t.createElement(A,null)),t.createElement(r.k,{justifyContent:"end",height:"100%",width:"40%"},t.createElement(y,{src:O,"aria-hidden":!0,alt:"",loading:"lazy"}),t.createElement(c.x,{display:"flex",position:"absolute",right:0,top:0},t.createElement(T.h,{icon:t.createElement(i.Z,null),"aria-label":D({id:"global.close",defaultMessage:"Close"}),onClick:w})))))):null}S.defaultProps={isOpen:!1},S.propTypes={children:s().node.isRequired,isOpen:s().bool,onClose:s().func.isRequired}},2121:function(R,f,e){e.d(f,{$k:function(){return g},Ef:function(){return h},FT:function(){return s},Nj:function(){return T},Ot:function(){return c},VS:function(){return i},_X:function(){return O},gu:function(){return r},lv:function(){return o},qZ:function(){return m},sN:function(){return n},uL:function(){return a},x4:function(){return v}});var t=e(12301);const n="settings_review-workflows",r="Settings/Review_Workflows/RESET_WORKFLOW",m="Settings/Review_Workflows/SET_WORKFLOW",v="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",c="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",T="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",g="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",i="Settings/Review_Workflows/WORKFLOW_UPDATE",o={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},s=t.W.colors.primary600,a={STAGE:"stage"},h="numberOfWorkflows",O="stagesPerWorkflow"},32329:function(R,f,e){e.d(f,{n:function(){return r}});var t=e(19565),n=e(20108);function r(m={}){const{get:v}=(0,t.kY)(),{id:c="",...T}=m,g={populate:"stages"},{data:i,isLoading:o,status:s,refetch:a}=(0,n.useQuery)(["review-workflows","workflows",c],async()=>(await v(`/admin/review-workflows/workflows/${c}`,{params:{...g,...T}})).data);let h=[];return c&&i?.data?h=[i.data]:Array.isArray(i?.data)&&(h=i.data),{meta:i?.meta??{},workflows:h,isLoading:o,status:s,refetch:a}}},32033:function(R,f,e){e.r(f),e.d(f,{default:function(){return z}});var t=e(32735),n=e(19565),r=e(15062),m=e(30305),v=e(87933),c=e(23866),T=e(56755),g=e(73269),i=e(33827),o=e(94547),s=e(19786),a=e(49372),h=e(3685),O=e(35658),C=e(50563),I=e(19406),P=e(68625),M=e(4038),p=e(67879),A=e(20108),y=e(53038),S=e(8471),l=e(90769),u=e(50337),w=e(27187),D=e(90562),L=e(2121),x=e(32329);const U=(0,S.ZP)(n.rU)`
  align-items: center;
  height: ${(0,n.Q1)(32)};
  display: flex;
  justify-content: center;
  padding: ${({theme:d})=>`${d.spaces[2]}}`};
  width: ${(0,n.Q1)(32)};

  svg {
    height: ${(0,n.Q1)(12)};
    width: ${(0,n.Q1)(12)};

    path {
      fill: ${({theme:d})=>d.colors.neutral500};
    }
  }

  &:hover,
  &:focus {
    svg {
      path {
        fill: ${({theme:d})=>d.colors.neutral800};
      }
    }
  }
`;function N(){const{formatMessage:d}=(0,p.Z)(),{push:j}=(0,y.k6)(),{collectionTypes:J,singleTypes:b,isLoading:q}=(0,l.G)(),{meta:B,workflows:K,isLoading:Z,refetch:_}=(0,x.n)(),[H,F]=t.useState(null),[ee,$]=t.useState(!1),{del:te}=(0,n.kY)(),{formatAPIError:ne}=(0,n.So)(),Q=(0,n.lm)(),{getFeature:se,isLoading:V}=(0,u.q5)(),{trackUsage:Y}=(0,n.rS)(),oe=(0,r.v9)(m._),{allowedActions:{canCreate:X,canDelete:ae}}=(0,n.ss)(oe.settings["review-workflows"]),W=se("review-workflows"),{mutateAsync:re,isLoading:ie}=(0,A.useMutation)(async({workflowId:E,stages:k})=>{const{data:{data:G}}=await te(`/admin/review-workflows/workflows/${E}`,{data:k});return G},{onSuccess(){Q({type:"success",message:{id:"notification.success.deleted",defaultMessage:"Deleted"}})}}),le=E=>[...J,...b].find(G=>G.uid===E).info.displayName,ce=E=>{F(E)},ue=()=>{F(null)},de=async()=>{try{const E=await re({workflowId:H});return await _(),F(null),E}catch(E){return Q({type:"warning",message:ne(E)}),null}};return t.useEffect(()=>{!Z&&!V&&W?.[L.Ef]&&B?.workflowCount>parseInt(W[L.Ef],10)&&$(!0)},[V,Z,W,B?.workflowCount,B.workflowsTotal]),t.createElement(t.Fragment,null,t.createElement(w.h4,{primaryAction:X&&t.createElement(n.Qj,{startIcon:t.createElement(I.Z,null),size:"S",to:"/settings/review-workflows/create",onClick:E=>{W?.[L.Ef]&&B?.workflowCount>=parseInt(W[L.Ef],10)?(E.preventDefault(),$(!0)):Y("willCreateWorkflow")}},d({id:"Settings.review-workflows.list.page.create",defaultMessage:"Create new workflow"})),subtitle:d({id:"Settings.review-workflows.list.page.subtitle",defaultMessage:"Manage your content review process"}),title:d({id:"Settings.review-workflows.list.page.title",defaultMessage:"Review Workflows"})}),t.createElement(w.fC,null,Z||q?t.createElement(v.k,{justifyContent:"center"},t.createElement(c.a,null,d({id:"Settings.review-workflows.page.list.isLoading",defaultMessage:"Workflows are loading"}))):t.createElement(T.i,{colCount:3,footer:X&&t.createElement(g.c,{icon:t.createElement(I.Z,null),onClick:()=>{W?.[L.Ef]&&B?.workflowCount>=parseInt(W[L.Ef],10)?$(!0):(j("/settings/review-workflows/create"),Y("willCreateWorkflow"))}},d({id:"Settings.review-workflows.list.page.create",defaultMessage:"Create new workflow"})),rowCount:1},t.createElement(i.h,null,t.createElement(o.Tr,null,t.createElement(s.Th,null,t.createElement(a.Z,{variant:"sigma"},d({id:"Settings.review-workflows.list.page.list.column.name.title",defaultMessage:"Name"}))),t.createElement(s.Th,null,t.createElement(a.Z,{variant:"sigma"},d({id:"Settings.review-workflows.list.page.list.column.stages.title",defaultMessage:"Stages"}))),t.createElement(s.Th,null,t.createElement(a.Z,{variant:"sigma"},d({id:"Settings.review-workflows.list.page.list.column.contentTypes.title",defaultMessage:"Content Types"}))),t.createElement(s.Th,null,t.createElement(h.T,null,d({id:"Settings.review-workflows.list.page.list.column.actions.title",defaultMessage:"Actions"}))))),t.createElement(O.p,null,K.map(E=>t.createElement(o.Tr,{...(0,n.X7)({fn(k){k.target.nodeName!=="BUTTON"&&j(`/settings/review-workflows/${E.id}`)}}),key:`workflow-${E.id}`},t.createElement(s.Td,{width:(0,n.Q1)(250)},t.createElement(a.Z,{textColor:"neutral800",fontWeight:"bold",ellipsis:!0},E.name)),t.createElement(s.Td,null,t.createElement(a.Z,{textColor:"neutral800"},E.stages.length)),t.createElement(s.Td,null,t.createElement(a.Z,{textColor:"neutral800"},(E?.contentTypes??[]).map(le).join(", "))),t.createElement(s.Td,null,t.createElement(v.k,{alignItems:"center",justifyContent:"end"},t.createElement(U,{to:`/settings/review-workflows/${E.id}`,"aria-label":d({id:"Settings.review-workflows.list.page.list.column.actions.edit.label",defaultMessage:"Edit {name}"},{name:E.name})},t.createElement(P.Z,null)),K.length>1&&ae&&t.createElement(C.h,{"aria-label":d({id:"Settings.review-workflows.list.page.list.column.actions.delete.label",defaultMessage:"Delete {name}"},{name:"Default workflow"}),icon:t.createElement(M.Z,null),noBorder:!0,onClick:()=>{ce(E.id)}}))))))),t.createElement(n.QH,{bodyText:{id:"Settings.review-workflows.list.page.delete.confirm.body",defaultMessage:"If you remove this worfklow, all stage-related information will be removed for this content-type. Are you sure you want to remove it?"},isConfirmButtonLoading:ie,isOpen:!!H,onToggleDialog:ue,onConfirm:de}),t.createElement(D.fC,{isOpen:ee,onClose:()=>$(!1)},t.createElement(D.Dx,null,d({id:"Settings.review-workflows.list.page.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})),t.createElement(D.uT,null,d({id:"Settings.review-workflows.list.page.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."})))))}function z(){const d=(0,r.v9)(m._);return t.createElement(n.O4,{permissions:d.settings["review-workflows"].main},t.createElement(N,null))}},73269:function(R,f,e){e.d(f,{c:function(){return i}});var t=e(74512),n=e(8471),r=e(72850),m=e(9026),v=e(87933),c=e(49372);const T=(0,n.ZP)(r.x)`
  height: ${24/16}rem;
  width: ${24/16}rem;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;

  svg {
    height: ${10/16}rem;
    width: ${10/16}rem;
  }

  svg path {
    fill: ${({theme:o})=>o.colors.primary600};
  }
`,g=(0,n.ZP)(r.x)`
  border-radius: 0 0 ${({theme:o})=>o.borderRadius} ${({theme:o})=>o.borderRadius};
  display: block;
  width: 100%;
  border: none;
`,i=({children:o,icon:s,...a})=>(0,t.jsxs)("div",{children:[(0,t.jsx)(m.i,{}),(0,t.jsx)(g,{as:"button",background:"primary100",padding:5,...a,children:(0,t.jsxs)(v.k,{children:[(0,t.jsx)(T,{"aria-hidden":!0,background:"primary200",children:s}),(0,t.jsx)(r.x,{paddingLeft:3,children:(0,t.jsx)(c.Z,{variant:"pi",fontWeight:"bold",textColor:"primary600",children:o})})]})})]})},29439:function(R,f,e){e.d(f,{Z:function(){return r}});var t=e(74512);const n=m=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...m,children:(0,t.jsx)("path",{fill:"#212134",d:"M24 13.3a.2.2 0 0 1-.2.2H5.74l8.239 8.239a.2.2 0 0 1 0 .282L12.14 23.86a.2.2 0 0 1-.282 0L.14 12.14a.2.2 0 0 1 0-.282L11.86.14a.2.2 0 0 1 .282 0L13.98 1.98a.2.2 0 0 1 0 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6Z"})}),r=n}}]);
