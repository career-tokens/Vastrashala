"use strict";(self.webpackChunkserver=self.webpackChunkserver||[]).push([[3757],{23037:(y,m,e)=>{e.r(m),e.d(m,{InformationBoxEE:()=>I});var t=e(67294),l=e(70642),o=e(11047),f=e(75515),c=e(77197),s=e(57993),u=e(86896),r=e(88767),a=e(50236),E=e(71926),n=e(38705),i=e(86978),g=e(52258),v=e(5318);const w="strapi_stage";function I(){const{initialData:A,isCreatingEntry:R,layout:{uid:O,options:k},isSingleType:D,onChange:C}=(0,s.Wq)(),{put:d}=(0,s.kY)(),T=A?.[w]??null,P=k?.reviewWorkflows??!1,{formatMessage:p}=(0,u.Z)(),{formatAPIError:K}=(0,s.So)(),U=(0,s.lm)(),{getFeature:Z}=(0,E.q)(),[F,S]=t.useState(!1),{meta:$,workflows:[N],isLoading:Y}=(0,g.n)({filters:{contentTypes:O}}),{error:x,isLoading:j,mutateAsync:H}=(0,r.useMutation)(async({entityId:h,stageId:W,uid:M})=>{const B=D?"single-types":"collection-types",{data:{data:G}}=await d(`/admin/content-manager/${B}/${M}/${h}/stage`,{data:{id:W}});return C({target:{name:w,value:G[w]}},!0),G},{onSuccess(){U({type:"success",message:{id:"content-manager.reviewWorkflows.stage.notification.saved",defaultMessage:"Review stage updated"}})}}),L=Z("review-workflows"),Q=x&&K(x)||null,X=async({value:h})=>{try{L?.[i.Ef]&&parseInt(L[i.Ef],10)<$.workflowCount?S("workflow"):L?.[i._X]&&parseInt(L[i._X],10)<N.stages.length?S("stage"):await H({entityId:A.id,stageId:h,uid:O})}catch{}},{themeColorName:V}=T?.color?(0,v.k)(T?.color):{};return t.createElement(a.d.Root,null,t.createElement(a.d.Title,null),P&&!R&&t.createElement(l.q4,{error:Q,name:w,id:w,value:T?.id,onChange:h=>X({value:h}),label:p({id:"content-manager.reviewWorkflows.stage.label",defaultMessage:"Review stage"}),startIcon:t.createElement(o.k,{as:"span",height:2,background:T?.color,borderColor:V==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2,marginRight:"-3px"}),customizeContent:()=>t.createElement(o.k,{as:"span",justifyContent:"space-between",alignItems:"center",width:"100%"},t.createElement(f.Z,{textColor:"neutral800",ellipsis:!0},T?.name),Y||j?t.createElement(c.a,{small:!0,style:{display:"flex"}}):null)},N?N.stages.map(({id:h,color:W,name:M})=>{const{themeColorName:B}=(0,v.k)(W);return t.createElement(l.ag,{startIcon:t.createElement(o.k,{height:2,background:W,borderColor:B==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),value:h,textValue:M},M)}):[]),t.createElement(a.d.Body,null),t.createElement(n.fC,{isOpen:F==="workflow",onClose:()=>S(!1)},t.createElement(n.Dx,null,p({id:"content-manager.reviewWorkflows.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})),t.createElement(n.uT,null,p({id:"content-manager.reviewWorkflows.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."}))),t.createElement(n.fC,{isOpen:F==="stage",onClose:()=>S(!1)},t.createElement(n.Dx,null,p({id:"content-manager.reviewWorkflows.stages.limit.title",defaultMessage:"You have reached the limit of stages for this workflow in your plan"})),t.createElement(n.uT,null,p({id:"content-manager.reviewWorkflows.stages.limit.body",defaultMessage:"Try deleting some stages or contact Sales to enable more stages."}))))}},71926:(y,m,e)=>{e.d(m,{q:()=>f});var t=e(67294),l=e(57993),o=e(88767);function f({enabled:c}={enabled:!0}){const{get:s}=(0,l.kY)(),{data:u,isError:r,isLoading:a}=(0,o.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:i}}=await s("/admin/license-limit-information");return i},{enabled:c}),E=u??{},n=t.useCallback(i=>(E?.features??[]).find(v=>v.name===i)?.options??{},[E?.features]);return{license:E,getFeature:n,isError:r,isLoading:a}}},38705:(y,m,e)=>{e.d(m,{uT:()=>O,fC:()=>C,Dx:()=>R});var t=e(67294),l=e(75515),o=e(11047),f=e(42866),c=e(59946),s=e(41580),u=e(12028),r=e(80994),a=e(70968),E=e(45697),n=e.n(E),i=e(86896),g=e(88972);const v=e.p+"0cd5f8915b265d5b1856.png",w="limits-title",I="https://strapi.io/pricing-cloud",A="https://strapi.io/contact-sales";function R({children:d}){return t.createElement(l.Z,{variant:"alpha",id:w},d)}R.propTypes={children:n().node.isRequired};function O({children:d}){return t.createElement(l.Z,{variant:"omega"},d)}O.propTypes={children:n().node.isRequired};function k(){const{formatMessage:d}=(0,i.Z)();return t.createElement(o.k,{gap:2,paddingTop:4},t.createElement(r.Q,{variant:"default",isExternal:!0,href:I},d({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),t.createElement(r.Q,{variant:"tertiary",isExternal:!0,href:A},d({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const D=g.ZP.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:d})=>`-${d.spaces[7]}`};
  margin-top: ${({theme:d})=>`-${d.spaces[7]}`};
  width: 360px;
`;function C({children:d,isOpen:T,onClose:P}){const{formatMessage:p}=(0,i.Z)();return T?t.createElement(f.P,{labelledBy:w},t.createElement(c.f,null,t.createElement(o.k,{gap:2,paddingLeft:7,position:"relative"},t.createElement(o.k,{alignItems:"start",direction:"column",gap:2,width:"60%"},d,t.createElement(k,null)),t.createElement(o.k,{justifyContent:"end",height:"100%",width:"40%"},t.createElement(D,{src:v,"aria-hidden":!0,alt:"",loading:"lazy"}),t.createElement(s.x,{display:"flex",position:"absolute",right:0,top:0},t.createElement(u.h,{icon:t.createElement(a.Z,null),"aria-label":p({id:"global.close",defaultMessage:"Close"}),onClick:P})))))):null}C.defaultProps={isOpen:!1},C.propTypes={children:n().node.isRequired,isOpen:n().bool,onClose:n().func.isRequired}},86978:(y,m,e)=>{e.d(m,{$k:()=>r,Ef:()=>g,FT:()=>n,Nj:()=>u,Ot:()=>s,VS:()=>a,_X:()=>v,gu:()=>o,lv:()=>E,qZ:()=>f,sN:()=>l,uL:()=>i,x4:()=>c});var t=e(42675);const l="settings_review-workflows",o="Settings/Review_Workflows/RESET_WORKFLOW",f="Settings/Review_Workflows/SET_WORKFLOW",c="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",s="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",u="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",r="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",a="Settings/Review_Workflows/WORKFLOW_UPDATE",E={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},n=t.W.colors.primary600,i={STAGE:"stage"},g="numberOfWorkflows",v="stagesPerWorkflow"},52258:(y,m,e)=>{e.d(m,{n:()=>o});var t=e(57993),l=e(88767);function o(f={}){const{get:c}=(0,t.kY)(),{id:s="",...u}=f,r={populate:"stages"},{data:a,isLoading:E,status:n,refetch:i}=(0,l.useQuery)(["review-workflows","workflows",s],async()=>(await c(`/admin/review-workflows/workflows/${s}`,{params:{...r,...u}})).data);let g=[];return s&&a?.data?g=[a.data]:Array.isArray(a?.data)&&(g=a.data),{meta:a?.meta??{},workflows:g,isLoading:E,status:n,refetch:i}}},5318:(y,m,e)=>{e.d(m,{k:()=>o,s:()=>f});var t=e(42675),l=e(86978);function o(c){if(!c)return null;const u=Object.entries(t.W.colors).filter(([,r])=>r.toUpperCase()===c.toUpperCase()).reduce((r,[a])=>(l.lv?.[a]&&(r=a),r),null);return u?{themeColorName:u,name:l.lv[u]}:null}function f(){return Object.entries(l.lv).map(([c,s])=>({hex:t.W.colors[c].toUpperCase(),name:s}))}}}]);
