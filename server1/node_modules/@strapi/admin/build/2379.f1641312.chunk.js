"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[2379],{50337:function(S,c,t){t.d(c,{pl:function(){return L},aY:function(){return p},q5:function(){return D.q}});var e=t(32735),a=t(19565),E=t(97889);const f={data:[],isLoading:!0};var m=(s,n)=>(0,E.ZP)(s,i=>{switch(n.type){case"GET_DATA_SUCCEEDED":{i.data=n.data,i.isLoading=!1;break}case"GET_DATA_ERROR":{i.isLoading=!1;break}default:return i}}),L=({ssoEnabled:s})=>{const[n,i]=(0,e.useReducer)(m,f),T=(0,a.lm)(),{get:v}=(0,a.kY)();return(0,e.useEffect)(()=>{(async()=>{try{if(!s){i({type:"GET_DATA_SUCCEEDED",data:[]});return}const{data:u}=await v("/admin/providers");i({type:"GET_DATA_SUCCEEDED",data:u})}catch(u){console.error(u),i({type:"GET_DATA_ERROR"}),T({type:"warning",message:{id:"notification.error"}})}})()},[v,s,T]),n},g=t(36866),o=t.n(g),A=t(67879),r=t(53038),D=t(53104);const l="strapi-notification-seat-limit",_="https://cloud.strapi.io/profile/billing",I="https://strapi.io/billing/request-seats";var p=()=>{const{formatMessage:s}=(0,A.Z)();let{license:n,isError:i,isLoading:T}=(0,D.q)();const v=(0,a.lm)(),{pathname:P}=(0,r.TH)(),{enforcementUserCount:u,permittedSeats:C,licenseLimitStatus:d,isHostedOnStrapiCloud:h}=n;(0,e.useEffect)(()=>{if(i||T)return;const U=!o()(C)&&!window.sessionStorage.getItem(`${l}-${P}`)&&(d==="AT_LIMIT"||d==="OVER_LIMIT");let R;d==="OVER_LIMIT"?R="warning":d==="AT_LIMIT"&&(R="softWarning"),U&&v({type:R,message:s({id:"notification.ee.warning.over-.message",defaultMessage:"Add seats to {licenseLimitStatus, select, OVER_LIMIT {invite} other {re-enable}} Users. If you already did it but it's not reflected in Strapi yet, make sure to restart your app."},{licenseLimitStatus:d}),title:s({id:"notification.ee.warning.at-seat-limit.title",defaultMessage:"{licenseLimitStatus, select, OVER_LIMIT {Over} other {At}} seat limit ({enforcementUserCount}/{permittedSeats})"},{licenseLimitStatus:d,enforcementUserCount:u,permittedSeats:C}),link:{url:h?_:I,label:s({id:"notification.ee.warning.seat-limit.link",defaultMessage:"{isHostedOnStrapiCloud, select, true {ADD SEATS} other {CONTACT SALES}}"},{isHostedOnStrapiCloud:h})},blockTransition:!0,onClose(){window.sessionStorage.setItem(`${l}-${P}`,!0)}})},[v,n,P,s,T,C,d,u,h,i])}},53104:function(S,c,t){t.d(c,{q:function(){return f}});var e=t(32735),a=t(19565),E=t(20108);function f({enabled:M}={enabled:!0}){const{get:m}=(0,a.kY)(),{data:O,isError:L,isLoading:g}=(0,E.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:r}}=await m("/admin/license-limit-information");return r},{enabled:M}),o=O??{},A=e.useCallback(r=>(o?.features??[]).find(l=>l.name===r)?.options??{},[o?.features]);return{license:o,getFeature:A,isError:L,isLoading:g}}},42379:function(S,c,t){t.r(c),t.d(c,{CreateActionEE:function(){return l}});var e=t(32735),a=t(87933),E=t(63919),f=t(99140),M=t(41415),m=t(69932),O=t(7961),L=t(36866),g=t.n(L),o=t(60216),A=t.n(o),r=t(67879),D=t(50337);const l=({onClick:_})=>{const{formatMessage:I}=(0,r.Z)(),{license:{permittedSeats:y,shouldStopCreate:p},isError:s,isLoading:n}=(0,D.q5)();return s||n?null:e.createElement(a.k,{gap:2},!g()(y)&&p&&e.createElement(E.u,{description:I({id:"Settings.application.admin-seats.at-limit-tooltip",defaultMessage:"At limit: add seats to invite more users"}),position:"left"},e.createElement(f.J,{width:`${14/16}rem`,height:`${14/16}rem`,color:"danger500",as:m.Z})),e.createElement(M.z,{"data-testid":"create-user-button",onClick:_,startIcon:e.createElement(O.Z,null),size:"S",disabled:p},I({id:"Settings.permissions.users.create",defaultMessage:"Invite new user"})))};l.propTypes={onClick:A().func.isRequired}}}]);
