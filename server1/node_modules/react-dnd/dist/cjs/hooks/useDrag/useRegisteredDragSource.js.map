{"version":3,"sources":["../../../../src/hooks/useDrag/useRegisteredDragSource.ts"],"sourcesContent":["import type { DragSourceMonitor } from '../../types/index.js'\nimport { registerSource, SourceConnector } from '../../internals/index.js'\nimport type { DragSourceHookSpec } from '../types.js'\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js'\nimport { useDragSource } from './useDragSource.js'\nimport { useDragDropManager } from '../useDragDropManager.js'\nimport { useDragType } from './useDragType.js'\n\nexport function useRegisteredDragSource<O, R, P>(\n\tspec: DragSourceHookSpec<O, R, P>,\n\tmonitor: DragSourceMonitor<O, R>,\n\tconnector: SourceConnector,\n): void {\n\tconst manager = useDragDropManager()\n\tconst handler = useDragSource(spec, monitor, connector)\n\tconst itemType = useDragType(spec)\n\n\tuseIsomorphicLayoutEffect(\n\t\tfunction registerDragSource() {\n\t\t\tif (itemType != null) {\n\t\t\t\tconst [handlerId, unregister] = registerSource(\n\t\t\t\t\titemType,\n\t\t\t\t\thandler,\n\t\t\t\t\tmanager,\n\t\t\t\t)\n\t\t\t\tmonitor.receiveHandlerId(handlerId)\n\t\t\t\tconnector.receiveHandlerId(handlerId)\n\t\t\t\treturn unregister\n\t\t\t}\n\t\t\treturn\n\t\t},\n\t\t[manager, monitor, connector, handler, itemType],\n\t)\n}\n"],"names":["useRegisteredDragSource","spec","monitor","connector","manager","useDragDropManager","handler","useDragSource","itemType","useDragType","useIsomorphicLayoutEffect","registerDragSource","handlerId","unregister","registerSource","receiveHandlerId"],"mappings":"AAAA;;;;QAQgBA,uBAAuB,GAAvBA,uBAAuB;AAPS,IAAA,QAA0B,WAA1B,0BAA0B,CAAA;AAEhC,IAAA,4BAAiC,WAAjC,iCAAiC,CAAA;AAC7C,IAAA,gBAAoB,WAApB,oBAAoB,CAAA;AACf,IAAA,qBAA0B,WAA1B,0BAA0B,CAAA;AACjC,IAAA,cAAkB,WAAlB,kBAAkB,CAAA;AAEvC,SAASA,uBAAuB,CACtCC,IAAiC,EACjCC,OAAgC,EAChCC,SAA0B,EACnB;IACP,MAAMC,OAAO,GAAGC,CAAAA,GAAAA,qBAAkB,AAAE,CAAA,mBAAF,EAAE;IACpC,MAAMC,OAAO,GAAGC,CAAAA,GAAAA,gBAAa,AAA0B,CAAA,cAA1B,CAACN,IAAI,EAAEC,OAAO,EAAEC,SAAS,CAAC;IACvD,MAAMK,QAAQ,GAAGC,CAAAA,GAAAA,cAAW,AAAM,CAAA,YAAN,CAACR,IAAI,CAAC;IAElCS,CAAAA,GAAAA,4BAAyB,AAexB,CAAA,0BAfwB,CACxB,SAASC,kBAAkB,GAAG;QAC7B,IAAIH,QAAQ,IAAI,IAAI,EAAE;YACrB,MAAM,CAACI,SAAS,EAAEC,UAAU,CAAC,GAAGC,CAAAA,GAAAA,QAAc,AAI7C,CAAA,eAJ6C,CAC7CN,QAAQ,EACRF,OAAO,EACPF,OAAO,CACP;YACDF,OAAO,CAACa,gBAAgB,CAACH,SAAS,CAAC;YACnCT,SAAS,CAACY,gBAAgB,CAACH,SAAS,CAAC;YACrC,OAAOC,UAAU,CAAA;SACjB;QACD,OAAM;KACN,EACD;QAACT,OAAO;QAAEF,OAAO;QAAEC,SAAS;QAAEG,OAAO;QAAEE,QAAQ;KAAC,CAChD;CACD"}