{"version":3,"sources":["../../../src/core/DragPreviewImage.ts"],"sourcesContent":["import { FC, useEffect, memo } from 'react'\nimport type { ConnectDragPreview } from '../types/index.js'\n\nexport interface DragPreviewImageProps {\n\tconnect: ConnectDragPreview\n\tsrc: string\n}\n/**\n * A utility for rendering a drag preview image\n */\nexport const DragPreviewImage: FC<DragPreviewImageProps> = memo(\n\tfunction DragPreviewImage({ connect, src }) {\n\t\tuseEffect(() => {\n\t\t\tif (typeof Image === 'undefined') return\n\n\t\t\tlet connected = false\n\t\t\tconst img = new Image()\n\t\t\timg.src = src\n\t\t\timg.onload = () => {\n\t\t\t\tconnect(img)\n\t\t\t\tconnected = true\n\t\t\t}\n\t\t\treturn () => {\n\t\t\t\tif (connected) {\n\t\t\t\t\tconnect(null)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\treturn null\n\t},\n)\n"],"names":["DragPreviewImage","memo","connect","src","useEffect","Image","connected","img","onload"],"mappings":"AAAA;;;;;AAAoC,IAAA,MAAO,WAAP,OAAO,CAAA;AAUpC,MAAMA,gBAAgB,GAA8BC,CAAAA,GAAAA,MAAI,AAqB9D,CAAA,KArB8D,CAC9D,SAASD,gBAAgB,CAAC,EAAEE,OAAO,CAAA,EAAEC,GAAG,CAAA,EAAE,EAAE;IAC3CC,CAAAA,GAAAA,MAAS,AAeP,CAAA,UAfO,CAAC,IAAM;QACf,IAAI,OAAOC,KAAK,KAAK,WAAW,EAAE,OAAM;QAExC,IAAIC,SAAS,GAAG,KAAK;QACrB,MAAMC,GAAG,GAAG,IAAIF,KAAK,EAAE;QACvBE,GAAG,CAACJ,GAAG,GAAGA,GAAG;QACbI,GAAG,CAACC,MAAM,GAAG,IAAM;YAClBN,OAAO,CAACK,GAAG,CAAC;YACZD,SAAS,GAAG,IAAI;SAChB;QACD,OAAO,IAAM;YACZ,IAAIA,SAAS,EAAE;gBACdJ,OAAO,CAAC,IAAI,CAAC;aACb;SACD,CAAA;KACD,CAAC;IAEF,OAAO,IAAI,CAAA;CACX,CACD;QArBYF,gBAAgB,GAAhBA,gBAAgB"}